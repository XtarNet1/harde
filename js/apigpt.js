const a2_0x52646e=a2_0x1000;(function(_0x48dc04,_0x5bc1b3){const _0x5bb13e=a2_0x1000,_0x998fe1=_0x48dc04();while(!![]){try{const _0x2965bd=parseInt(_0x5bb13e(0x162))/0x1+-parseInt(_0x5bb13e(0x178))/0x2*(parseInt(_0x5bb13e(0x18d))/0x3)+-parseInt(_0x5bb13e(0x191))/0x4+parseInt(_0x5bb13e(0x175))/0x5*(-parseInt(_0x5bb13e(0x179))/0x6)+-parseInt(_0x5bb13e(0x166))/0x7*(-parseInt(_0x5bb13e(0x167))/0x8)+parseInt(_0x5bb13e(0x1b0))/0x9*(-parseInt(_0x5bb13e(0x189))/0xa)+-parseInt(_0x5bb13e(0x171))/0xb*(-parseInt(_0x5bb13e(0x17d))/0xc);if(_0x2965bd===_0x5bc1b3)break;else _0x998fe1['push'](_0x998fe1['shift']());}catch(_0xc97091){_0x998fe1['push'](_0x998fe1['shift']());}}}(a2_0x1184,0x4c789));function a2_0x1000(_0xef4aa3,_0x5226b8){const _0x11844d=a2_0x1184();return a2_0x1000=function(_0x100004,_0x4c824c){_0x100004=_0x100004-0x160;let _0x3ffd3f=_0x11844d[_0x100004];return _0x3ffd3f;},a2_0x1000(_0xef4aa3,_0x5226b8);}function a2_0x1184(){const _0x167ade=['maximum\x20context\x20length','openRouterApiKey','apiUrl','error','apiModel','gpt\x20request','reduce','/v1/chat/completions','uncensoredAi','log','forEach','lmp-gpt-error-gpt','maxSymbolsInChat','max_tokens','some','9wZELxW','find','pop','492660UTAcUK','sk-or-v1','role','split','2289Qrihnp','7696cwJhmm','Authorization','gptApiKey','aborted','user','text','status','gptApiUrl','useLava','data:\x20','22dmBdoy','Bearer\x20app','filter','stringify','495nSslMW','isArray','Please\x20visit\x20https://discord.gg/88fQT5Bgfe\x20and\x20get\x20free\x20Api\x20Key.\x20','192322XLoezd','19308GcxgDG','settings','body','lastIndexOf','4357428QlvLqm','gptModelName','substring','content','anthropic/claude-3-haiku','getReader','POST','message','choices','mistralai/mixtral-8x7b-instruct','indexOf','temperature','2946710EPhYWq','loginToken','contact','length','12EhKJpu','lmp-gpt','type','messages','889400kPrPfn','object','frequency_penalty','Bearer\x20','read','application/json','template','hasOwnProperty','gpt-3.5-turbo','parse','non\x20streaming\x20response\x20','gpt\x20response\x20','startsWith','trim','adShadowRoot','signal'];a2_0x1184=function(){return _0x167ade;};return a2_0x1184();}async function GPT(_0x34062a){const _0x1b5875=a2_0x1000;let {messages:_0xd26a67,useVision:useVision=!bs[_0x1b5875(0x17a)][_0x1b5875(0x16f)]&&_0xd26a67[_0x1b5875(0x1af)](_0x1d79f7=>_0x1d79f7[_0x1b5875(0x164)]==_0x1b5875(0x16b)&&_0x1d79f7['content']?.[_0x1b5875(0x1af)]?.(_0x5ca4b8=>_0x5ca4b8[_0x1b5875(0x18f)]=='image_url')),openRouter:openRouter=bs['settings'][_0x1b5875(0x169)]?.[_0x1b5875(0x19d)](_0x1b5875(0x163)),stream:stream=!![],model:model=useVision?_0x1b5875(0x181):bs[_0x1b5875(0x17a)][_0x1b5875(0x17e)]||bs[_0x1b5875(0x18b)][_0x1b5875(0x1a5)]||(openRouter?bs['settings'][_0x1b5875(0x1a9)]?_0x1b5875(0x186):'anthropic/claude-3-haiku':_0x1b5875(0x199)),functions:_0x412cee,forceGPT:_0xea9fbe,apikey:apikey=bs['settings']['gptApiKey'],apiUrl:apiUrl=bs[_0x1b5875(0x17a)][_0x1b5875(0x16e)]||bs[_0x1b5875(0x18b)][_0x1b5875(0x1a3)]}=_0x34062a,_0x3c092e=arguments[_0x1b5875(0x18c)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:_0x5705c2=>{},_0x557457=arguments['length']>0x2&&arguments[0x2]!==undefined?arguments[0x2]:0x0;logEventOnce(_0x1b5875(0x18e));if(_0x557457>0x3)throw new Error(_0x1b5875(0x177));let _0x1edff2=abortController?.[_0x1b5875(0x1a0)];(!_0x1edff2||_0x1edff2[_0x1b5875(0x16a)])&&(abortController=new AbortController(),_0x1edff2=abortController['signal']);var _0x454777=_0xea9fbe||apikey||apiUrl||isApp;if(!_0x454777||_0x557457>0x2)return await GPTHF({'messages':_0xd26a67,'stream':stream,'model':model,'functions':_0x412cee},_0x3c092e,_0x557457);const _0x3069cd=new TextDecoder();console[_0x1b5875(0x1aa)](_0x1b5875(0x1a6),clone(_0xd26a67),clone(_0x412cee||''));if(_0x412cee?.['length']==0x0)_0x412cee=undefined;if(useVision)_0x412cee=undefined;const _0x289f77={'Content-Type':_0x1b5875(0x196)};if(useVision)_0xd26a67=_0xd26a67[_0x1b5875(0x173)](_0x4a69dc=>_0x4a69dc[_0x1b5875(0x164)]!=='function');let _0x33de19=bs['settings']['llmParams'];_0x33de19=replaceEmptyStringWithUndefined(_0x33de19);let _0x3f3a3a=JSON[_0x1b5875(0x174)]({'messages':_0xd26a67[_0x1b5875(0x173)](_0x52f306=>!_0x52f306[_0x1b5875(0x1a4)]),'max_tokens':useVision||apiUrl&&!bs[_0x1b5875(0x18b)][_0x1b5875(0x1a3)]?bs[_0x1b5875(0x17a)][_0x1b5875(0x1ae)]:undefined,'stream':stream,'model':model,'functions':_0x412cee,'additional':{'authToken':bs[_0x1b5875(0x17a)][_0x1b5875(0x18a)],'openrouter':bs[_0x1b5875(0x17a)][_0x1b5875(0x1a2)]},'frequency_penalty':_0x33de19[_0x1b5875(0x193)],'presence_penalty':_0x33de19['presence_penalty'],'temperature':_0x33de19[_0x1b5875(0x188)],'top_p':_0x33de19['top_p']},(_0x1ecd4a,_0x5be29d)=>_0x1ecd4a===_0x1b5875(0x197)||_0x1ecd4a[0x0]==='_'?undefined:_0x5be29d);_0x289f77[_0x1b5875(0x168)]=apikey?_0x1b5875(0x194)+apikey:apiUrl?undefined:isApp?_0x1b5875(0x172):'kg'+generateHash(_0x3f3a3a);let _0x1375ed;try{_0x1375ed=await fetch(apiUrl||tmrace+_0x1b5875(0x1a8),{'headers':_0x289f77,'method':_0x1b5875(0x183),'body':_0x3f3a3a,'signal':_0x1edff2});}catch(_0x44d7f3){_0x1375ed={'text':()=>_0x44d7f3['message']};}if(useVision)chat[_0x1b5875(0x190)][_0x1b5875(0x1ab)](_0x5b8854=>{const _0x21bf63=_0x1b5875;if(Array[_0x21bf63(0x176)](_0x5b8854[_0x21bf63(0x180)]))_0x5b8854[_0x21bf63(0x180)]=_0x5b8854[_0x21bf63(0x180)][_0x21bf63(0x160)](_0x606c20=>_0x606c20['type']=='text')?.[_0x21bf63(0x16c)]||'';});if(_0x1375ed['ok']){}else{let _0x317908=await _0x1375ed[_0x1b5875(0x16c)]();if(_0x1375ed[_0x1b5875(0x16d)]===0x19d||_0x317908['includes'](_0x1b5875(0x1a1)))return bs[_0x1b5875(0x17a)][_0x1b5875(0x1ad)]/=0x2,await GPT({'messages':_0xd26a67,'stream':stream,'model':model,'functions':_0x412cee,'useVision':useVision,'openRouter':openRouter},_0x3c092e,_0x557457+0x1);return logEventOnce(_0x1b5875(0x1ac),{'error':_0x317908}),await GPTHF({'messages':_0xd26a67,'stream':stream,'model':model,'functions':_0x412cee},_0x3c092e);}const _0x162f91=_0x1375ed[_0x1b5875(0x17b)][_0x1b5875(0x182)]();let _0x3097f8='',_0x32ba0a={'message':{}};while(!![]){const {done:_0xb986b3,value:_0x556556}=await _0x162f91[_0x1b5875(0x195)]({'signal':_0x1edff2});if(_0xb986b3)break;_0x3097f8+=_0x3069cd['decode'](_0x556556);const _0x4f974d=_0x3097f8[_0x1b5875(0x165)]('\x0a');_0x3097f8=_0x4f974d[_0x1b5875(0x161)]();for(const _0x260b31 of _0x4f974d){if(_0x260b31[_0x1b5875(0x19d)](_0x1b5875(0x170))){if(_0x260b31[_0x1b5875(0x17f)](0x6)==='[DONE]')return console[_0x1b5875(0x1aa)](_0x1b5875(0x19c),_0x260b31),_0x32ba0a;let _0x6d8f32=JSON[_0x1b5875(0x19a)](_0x260b31['substring'](0x6)),_0x26e69b=_0x6d8f32[_0x1b5875(0x185)]?.[0x0];if(_0x6d8f32[_0x1b5875(0x1a4)]?.['code'])return await GPTHF({'messages':_0xd26a67,'stream':stream,'model':model,'functions':_0x412cee},_0x3c092e,_0x557457+0x1);if(!_0x26e69b)continue;_0x32ba0a[_0x1b5875(0x184)]=combineJSON(_0x32ba0a[_0x1b5875(0x184)],_0x26e69b['delta']),_0x32ba0a={..._0x32ba0a,..._0x26e69b},_0x3c092e(_0x32ba0a);}}}let _0x386182=await _0x1375ed['json']();return console[_0x1b5875(0x1aa)](_0x1b5875(0x19b),clone(_0x386182)),_0x3c092e(_0x386182),_0x386182;}LoadComponent('components/limitPopup.html',globalThis[a2_0x52646e(0x19f)]);function combineJSON(_0x16cb9a,_0x319cc8){const _0x31902f=a2_0x52646e;var _0x1f10a4={};for(var _0x1b994a in _0x16cb9a){_0x16cb9a[_0x31902f(0x198)](_0x1b994a)&&_0x319cc8['hasOwnProperty'](_0x1b994a)&&_0x16cb9a[_0x1b994a]!==_0x319cc8[_0x1b994a]?typeof _0x16cb9a[_0x1b994a]===_0x31902f(0x192)&&typeof _0x319cc8[_0x1b994a]===_0x31902f(0x192)?_0x1f10a4[_0x1b994a]=combineJSON(_0x16cb9a[_0x1b994a],_0x319cc8[_0x1b994a]):_0x1f10a4[_0x1b994a]=_0x16cb9a[_0x1b994a]+_0x319cc8[_0x1b994a]:_0x1f10a4[_0x1b994a]=_0x16cb9a[_0x1b994a];}for(var _0x1b994a in _0x319cc8){!_0x1f10a4[_0x31902f(0x198)](_0x1b994a)&&(_0x1f10a4[_0x1b994a]=_0x319cc8[_0x1b994a]);}return _0x1f10a4;}function LimitMessages(_0x24e51e,_0x1e2162){const _0x5e8171=a2_0x52646e;let _0x1cf306=_0x24e51e[_0x5e8171(0x1a7)]((_0x312714,_0x5d1680)=>_0x312714+(_0x5d1680[_0x5e8171(0x180)]?.[_0x5e8171(0x18c)]||0x0),0x0);if(_0x1cf306>_0x1e2162){functions=undefined,_0x24e51e=_0x24e51e[_0x5e8171(0x173)](_0x8b0cac=>_0x8b0cac[_0x5e8171(0x180)]);for(let _0x43f4a6=0x0;_0x43f4a6<0x88b8&&_0x1cf306>_0x1e2162;_0x43f4a6++){_0x24e51e=removeNumberFromMiddle(_0x24e51e),_0x1cf306=_0x24e51e['reduce']((_0x5810b1,_0x3a4c4c)=>_0x5810b1+_0x3a4c4c[_0x5e8171(0x180)][_0x5e8171(0x18c)],0x0);}}return _0x24e51e;}function removeNumberFromMiddle(_0x361e9b){const _0x394eb1=a2_0x52646e;let _0xf9e21f=_0x361e9b[_0x394eb1(0x1a7)]((_0x216e16,_0x58f891)=>_0x216e16+_0x58f891[_0x394eb1(0x180)][_0x394eb1(0x18c)],0x0),_0x4b4334=Math['floor'](_0xf9e21f/0x2),_0x184bb7=0x0,_0x49c82e=0x0,_0x5114ed;for(let _0x223482=0x0;_0x223482<_0x361e9b[_0x394eb1(0x18c)];_0x223482++){if(_0x184bb7+_0x361e9b[_0x223482][_0x394eb1(0x180)]['length']>=_0x4b4334){_0x49c82e=_0x223482,_0x5114ed=_0x361e9b[_0x223482][_0x394eb1(0x180)];break;}_0x184bb7+=_0x361e9b[_0x223482]['content'][_0x394eb1(0x18c)];}let _0x430694=_0x5114ed[_0x394eb1(0x18c)]/0x2,_0x540292=_0x5114ed[_0x394eb1(0x17c)]('\x0a',_0x430694-0x1),_0x202bc4=_0x5114ed[_0x394eb1(0x187)]('\x0a',_0x430694);_0x202bc4===-0x1&&(_0x202bc4=_0x5114ed[_0x394eb1(0x18c)]);let _0x3e379b=_0x5114ed[_0x394eb1(0x17f)](_0x540292+0x1,_0x202bc4+0x1);console['log']('Removed\x20string:',_0x3e379b);let _0x1ca79d=_0x5114ed[_0x394eb1(0x17f)](0x0,_0x540292+0x1)+_0x5114ed[_0x394eb1(0x17f)](_0x202bc4+0x1);return _0x361e9b[_0x49c82e][_0x394eb1(0x180)]=_0x1ca79d[_0x394eb1(0x19e)](),_0x361e9b=_0x361e9b[_0x394eb1(0x173)](_0x1d8bd8=>_0x1d8bd8[_0x394eb1(0x180)]!==''),_0x361e9b;}