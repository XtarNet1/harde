const a36_0x45142c=a36_0x3f0a;function a36_0x3f0a(_0x70a39b,_0x5b074b){const _0x3a2a6f=a36_0x3a2a();return a36_0x3f0a=function(_0x3f0a09,_0x1727a4){_0x3f0a09=_0x3f0a09-0x118;let _0x389929=_0x3a2a6f[_0x3f0a09];return _0x389929;},a36_0x3f0a(_0x70a39b,_0x5b074b);}(function(_0x4049ca,_0x505fe9){const _0x41e452=a36_0x3f0a,_0x13a27b=_0x4049ca();while(!![]){try{const _0x3ce8c0=parseInt(_0x41e452(0x164))/0x1+-parseInt(_0x41e452(0x171))/0x2+parseInt(_0x41e452(0x11b))/0x3*(-parseInt(_0x41e452(0x16f))/0x4)+-parseInt(_0x41e452(0x175))/0x5*(parseInt(_0x41e452(0x12d))/0x6)+parseInt(_0x41e452(0x13d))/0x7+parseInt(_0x41e452(0x168))/0x8*(-parseInt(_0x41e452(0x122))/0x9)+-parseInt(_0x41e452(0x12f))/0xa;if(_0x3ce8c0===_0x505fe9)break;else _0x13a27b['push'](_0x13a27b['shift']());}catch(_0x57e645){_0x13a27b['push'](_0x13a27b['shift']());}}}(a36_0x3a2a,0x3e8c0));let speechMicTime=0x0,myvad;async function StopVoiceDecetion(){const _0x5798dc=a36_0x3f0a;myvad[_0x5798dc(0x14a)][_0x5798dc(0x125)]()[_0x5798dc(0x12e)](_0x49cd39=>{const _0x200840=_0x5798dc;_0x49cd39[_0x200840(0x134)]();}),myvad[_0x5798dc(0x17a)](),chat[_0x5798dc(0x157)]=![];}let encoder=new Worker(a36_0x45142c(0x135));async function StartVoiceDetection(_0x44a214){const _0x23e9c5=a36_0x45142c;if(chat[_0x23e9c5(0x12a)]){console[_0x23e9c5(0x17d)](_0x23e9c5(0x14d));return;}try{while(typeof vad===_0x23e9c5(0x141))await new Promise(_0x170b41=>setTimeout(_0x170b41,0x64));const _0x258867=await navigator[_0x23e9c5(0x159)][_0x23e9c5(0x158)]();if(myvad)StopVoiceDecetion();chat[_0x23e9c5(0x157)]=!![],console[_0x23e9c5(0x17d)]('start\x20voice\x20detection');let _0x57e8cb=await navigator[_0x23e9c5(0x159)][_0x23e9c5(0x174)]({'audio':{'echoCancellation':bs[_0x23e9c5(0x13f)]['sr'][_0x23e9c5(0x136)],'autoGainControl':bs['settings']['sr'][_0x23e9c5(0x15b)],'noiseSuppression':bs[_0x23e9c5(0x13f)]['sr']['noiseSuppression'],'deviceId':_0x258867[_0x23e9c5(0x13b)](_0xcb79b1=>_0xcb79b1[_0x23e9c5(0x14b)]===_0x23e9c5(0x15d)&&_0xcb79b1[_0x23e9c5(0x119)]==bs['settings'][_0x23e9c5(0x139)]['selected'])?.['deviceId']}});chat[_0x23e9c5(0x12a)]=Date[_0x23e9c5(0x132)]();let _0x341482;myvad=globalThis[_0x23e9c5(0x11a)]=document[_0x23e9c5(0x11a)]=await vad[_0x23e9c5(0x11f)][_0x23e9c5(0x17b)]({'stream':_0x57e8cb,'positiveSpeechThreshold':bs['settings']['sr'][_0x23e9c5(0x118)],'negativeSpeechThreshold':bs[_0x23e9c5(0x13f)]['sr']['negativeSpeechThreshold'],'redemptionFrames':bs[_0x23e9c5(0x13f)]['sr'][_0x23e9c5(0x15a)],'preSpeechPadFrames':bs['settings']['sr']['preSpeechPadFrames'],'minSpeechFrames':bs[_0x23e9c5(0x13f)]['sr'][_0x23e9c5(0x121)],'onSpeechEnd':_0x3bc1dc=>{const _0x22ba9e=_0x23e9c5;encoder['postMessage']({'cmd':_0x22ba9e(0x13a),'config':{'samplerate':0x3e80}}),encoder['postMessage']({'cmd':_0x22ba9e(0x148),'buf':_0x3bc1dc}),encoder[_0x22ba9e(0x17c)]({'cmd':_0x22ba9e(0x178)}),console[_0x22ba9e(0x17d)]('Speech\x20end\x20detected');let _0x1a4c0f=_0x44a214?.();encoder[_0x22ba9e(0x145)]=async function(_0x4ecc20){const _0x247a01=_0x22ba9e;console[_0x247a01(0x17d)](_0x247a01(0x172),_0x4ecc20['data']);if(_0x4ecc20[_0x247a01(0x15f)][_0x247a01(0x146)]===_0x247a01(0x15e)){let _0x4b6902=new Blob([_0x4ecc20[_0x247a01(0x15f)]['buf']],{'type':_0x247a01(0x161)});if(bs[_0x247a01(0x13f)]['sr']['playbackOwnVoice'])new Audio(URL['createObjectURL'](_0x4b6902))['play']();else alright();try{transcript=await promiseRace([SendAudioGoogle(_0x4b6902),SendAudio(_0x4b6902)]),_0x1a4c0f[_0x247a01(0x16e)]?.(transcript);}catch(_0x4d07f9){console[_0x247a01(0x17d)](_0x4d07f9),What(_0x1a4c0f),clearTimeout(_0x341482);}}};},'onVADMisfire':()=>{const _0x2a859c=_0x23e9c5;console[_0x2a859c(0x17d)](_0x2a859c(0x143)),clearTimeout(_0x341482);},'onFrameProcessed':_0x1ca30c=>{const _0x4a8110=_0x23e9c5;_0x1ca30c[_0x4a8110(0x142)]>0.5&&(speechMicTime=Date['now']()+0x64);},'onSpeechStart':async()=>{const _0x7d958a=_0x23e9c5;if(!bs[_0x7d958a(0x13f)]['canInterrupt'])return;clearTimeout(_0x341482),_0x341482=setTimeout(()=>{const _0x52c031=_0x7d958a;audioPlayer[_0x52c031(0x17a)]();},0x12c);}}),myvad[_0x23e9c5(0x155)]();const _0x52e499=myvad[_0x23e9c5(0x144)][_0x23e9c5(0x12b)];myvad[_0x23e9c5(0x144)][_0x23e9c5(0x12b)]=function(_0xb56c1a){const _0x50066b=_0x52e499(_0xb56c1a);return _0x50066b;};}catch(_0x29b82c){console[_0x23e9c5(0x17d)](_0x29b82c);}chat[_0x23e9c5(0x12a)]=0x0;}function a36_0x3a2a(){const _0x2433db=['canInterrupt','recognitionStarted','enumerateDevices','mediaDevices','redemptionFrames','autoGainControl','response_format','audioinput','end','data','max','audio/flac','Alright','json','496514qteIbk','floor','confidenceThresholdGoogle','audio','24264fQuAPo','result','length','gptApiKey','transcript','parse','onTranscript','4zNAwaE','audio/x-flac;\x20rate=16000','128244eWKrbf','encoder:\x20','exp','getUserMedia','334905bUvKQM','language','AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw','finish','confidence','pause','new','postMessage','log','micSensivity','label','myvad','432717tfPzLQ','message','keys','alternative','MicVAD','file','minSpeechFrames','567YlzAjN','model','temperature','getTracks','segments','POST','append','text','micTime','processFrame','/speech-api/full-duplex/v1/up?','12RPBBSi','forEach','1671080kHwmyW','error','selected','now','pow','stop','libs/encoder.js','echoCancellation','nospeech','sqrt','mic','init','find','whisper-1','3221316pWWcIt','split','settings','random','undefined','isSpeech','misfire','audioNodeVAD','onmessage','cmd','Final\x20google\x20transcript\x20is:\x0a','encode','confidenceThresholdWhisper','stream','kind','Not\x20confident\x20enough','already\x20initializing','sk-','half','substr','map','verbose_json','whisper','Error:\x20','start'];a36_0x3a2a=function(){return _0x2433db;};return a36_0x3a2a();}function alright(){const _0x488d7d=a36_0x45142c;let _0x3833dd=arguments['length']>0x0&&arguments[0x0]!==undefined?arguments[0x0]:_0x488d7d(0x162),_0x303536=arguments[_0x488d7d(0x16a)]>0x1&&arguments[0x1]!==undefined?arguments[0x1]:![];if(bs[_0x488d7d(0x13f)][_0x488d7d(0x156)]||bs[_0x488d7d(0x13f)]['sr'][_0x488d7d(0x153)]||_0x303536)generateAudio(_0x3833dd,null);}async function nospeech(){const _0x4ffe06=a36_0x45142c;while(Date['now']()-speechMicTime<0x0){console[_0x4ffe06(0x17d)](_0x4ffe06(0x137)),await new Promise(_0xcee07d=>setTimeout(_0xcee07d,0x64));}}async function SendAudio(_0x1d2532){const _0x16fb74=a36_0x45142c,_0x285564=new FormData();_0x285564['append']('file',_0x1d2532,_0x16fb74(0x167)+new Date()['toISOString']()+'.flac'),_0x285564['append'](_0x16fb74(0x123),_0x16fb74(0x13c)),_0x285564[_0x16fb74(0x128)]('temperature',bs['settings']['sr'][_0x16fb74(0x124)]);if(bs[_0x16fb74(0x176)]!='en')_0x285564[_0x16fb74(0x128)]('language',bs[_0x16fb74(0x176)][_0x16fb74(0x13e)]('-')[0x0]);_0x285564[_0x16fb74(0x128)](_0x16fb74(0x15c),_0x16fb74(0x152));const _0x237307=await fetch(bs[_0x16fb74(0x13f)][_0x16fb74(0x16b)]?.['startsWith'](_0x16fb74(0x14e))?'https://api.openai.com/v1/audio/transcriptions':tmrace+'/v1/audio/transcriptions',{'method':_0x16fb74(0x127),'headers':{'Authorization':bs[_0x16fb74(0x13f)][_0x16fb74(0x16b)]?'Bearer\x20'+bs['settings'][_0x16fb74(0x16b)]:'hifredi'},'body':_0x285564}),_0x29e70e=await _0x237307[_0x16fb74(0x163)]();if(_0x29e70e&&_0x29e70e['error'])throw _0x16fb74(0x154)+_0x29e70e[_0x16fb74(0x130)][_0x16fb74(0x11c)];else{let _0x44c221=0x0;for(const _0x937c07 of _0x29e70e[_0x16fb74(0x126)]){const _0x14e039=Math[_0x16fb74(0x173)](_0x937c07['avg_logprob']);_0x44c221+=_0x14e039;}const _0x39da61=_0x44c221/_0x29e70e[_0x16fb74(0x126)][_0x16fb74(0x16a)];console[_0x16fb74(0x17d)]('whisper\x20Confidence:',_0x39da61,_0x29e70e['text']);if(_0x39da61>bs[_0x16fb74(0x13f)]['sr'][_0x16fb74(0x149)]&&ValidateText(_0x29e70e['text']))return _0x29e70e[_0x16fb74(0x129)];else throw new Error(_0x16fb74(0x14c));}}function ValidateText(_0x9d3e94){const _0x43a5f1=a36_0x45142c;let _0x835322=findRepeatingPatterns(_0x9d3e94),_0x10e5e5=Object[_0x43a5f1(0x11d)](_0x835322)[_0x43a5f1(0x151)](_0x42c032=>_0x835322[_0x42c032]*(0x1+Math[_0x43a5f1(0x138)](_0x42c032['length']))),_0x2577dd=Math[_0x43a5f1(0x160)](..._0x10e5e5)<0xa;return console[_0x43a5f1(0x17d)]('validation',_0x10e5e5),_0x2577dd;}function findRepeatingPatterns(_0x3d10e7){const _0x1088c7=a36_0x45142c,_0x1e2d2e={};for(let _0x2a82f6=0x1;_0x2a82f6<=_0x3d10e7['length']/0x2;_0x2a82f6++){for(let _0x5dc994=0x0;_0x5dc994<_0x3d10e7[_0x1088c7(0x16a)]-_0x2a82f6;_0x5dc994++){const _0x50d079=_0x3d10e7[_0x1088c7(0x150)](_0x5dc994,_0x2a82f6);let _0x5567b9=0x1;for(let _0xf6d5a7=_0x5dc994+_0x2a82f6;_0xf6d5a7<_0x3d10e7[_0x1088c7(0x16a)];_0xf6d5a7+=_0x2a82f6){const _0xd408f=_0x3d10e7[_0x1088c7(0x150)](_0xf6d5a7,_0x2a82f6);if(_0x50d079===_0xd408f)_0x5567b9++,_0x5dc994=_0xf6d5a7;else break;}_0x5567b9>0x1&&(_0x1e2d2e[_0x50d079]=_0x5567b9);}}return _0x1e2d2e;}async function SendAudioGoogle(_0x43f646){const _0x1d8390=a36_0x45142c,_0x58d61f=tmrace+_0x1d8390(0x12c)+new URLSearchParams({'output':_0x1d8390(0x163),'lang':bs[_0x1d8390(0x13f)][_0x1d8390(0x176)][_0x1d8390(0x131)],'pfilter':0x0,'key':_0x1d8390(0x177),'client':'chromium','maxAlternatives':0x3,'pair':parseInt(Math[_0x1d8390(0x140)]()*Math[_0x1d8390(0x133)](0x2,0x20))['toString'](0x10)}),_0x2fb9fa=new FormData();_0x2fb9fa[_0x1d8390(0x128)](_0x1d8390(0x120),_0x43f646);const _0xdfb2ae=await fetch(_0x58d61f,{'method':_0x1d8390(0x127),'headers':{'Content-Type':_0x1d8390(0x170)},'body':_0x2fb9fa,'duplex':_0x1d8390(0x14f)}),_0x157b10=await _0xdfb2ae[_0x1d8390(0x129)](),_0x189416=_0x157b10[_0x1d8390(0x13e)]('\x0a'),_0x1506f3=JSON[_0x1d8390(0x16d)](_0x189416[_0x189416[_0x1d8390(0x16a)]-0x2]),_0x410f95=_0x1506f3[_0x1d8390(0x169)][0x0][_0x1d8390(0x11e)][0x0];console[_0x1d8390(0x17d)](_0x1d8390(0x147),_0x410f95);if(_0x410f95['confidence']<bs[_0x1d8390(0x13f)]['sr'][_0x1d8390(0x166)])throw'\x20confidence\x20too\x20low\x20'+_0x410f95[_0x1d8390(0x179)];return _0x410f95[_0x1d8390(0x16c)];}function getRandom(_0x1fe23f){const _0x407c78=a36_0x45142c;let _0x47236d=Math[_0x407c78(0x165)](Math['random']()*_0x1fe23f[_0x407c78(0x16a)]);return _0x1fe23f[_0x47236d];}